## 사용하는 애들의 입장에서 도메인을 생각해보자 


로또라...

Number (1~45 까지의 숫자만 존재, 이 경우 캐시를 사용하면 될 듯)   
Lotto (Number 가 6개 모인 집합, 중복이 없어야 함, 생성시 sorting된 결과였으면)

Lotto를 생성하는 기능
- LottoFactory 를 만든다 (이 경우에 어떻게 해야할랑가??)
- validate 의 경우는 어떻게 처리해야할랑가?? (정확히는 어디서)

WinningLotto -> Lotto와 비교해서 Rank 를 구해주는 역할?

Rank -> 몇등인지를 기록

Analyzer (or builder )

numbers 인데 셔플도 가능하고 소팅도 가능한 친구? 


RankAnalysis
- 분석을 위한 객체 (VO)
- builder 를 통해서 만들 예정

#### 그러면 builder 를 공부해보자...
만드는 이유
- RankAnalysis 란 애를 만들기 위해서 (이 친구는 딱 만들어질때 불변이도록 하고싶음... String 생각하면서 Builder를 생각)

RankAnalysis 
- WinningLotto 는 무조건 존재, 그 후 Lotto 들과 비교 + 분석

RankAnalysisBuilder
- 생성시에 WinningLotto 를 가지고 생성
- 이 후, add(userLotto) 를 통해서 추가


#### 일급콜렉션을 만들다 보니깐... Counter라는 애로 포장하고 싶어진다...
- Map<Rank, Integer> 로 개수를 체크하는 역할
- 이렇게 모아놓으면.. map이 아닌 counter의 역할에만 집중할 수 있고, 내부구현의 변경을 외부에서 신경쓸 필요가 없다
- 그리고 map에서 신경 쓸 부분이 Counter를 사용하는 애와 분리가 된다. 

통계를 내려면.. 로또의 가격도 필요하구나
(전체 개수 * 로또 가격)

#### 아... 돈도... Price라는 애를 만들어도 좋겠다..
- LottoPrice? (로또 내부에 저장하는게 좋을까?)

#### 로또를 사고 파는 역할도? (몇개는 자동으로 몇개는 수동으로 + 돈관리)
- LottoSimulator 라는 애를 만들자..
    - 돈을 입력받으면 ... RankAnalysis 를 생성해주는?? 

#### 사용하는 사례??



#### 테스트가 중복되는 건 아닐까??
- ex. LottoFactoryTest, LottoTest 
    - 위임(delegate) 이 잘되는지를 확인하려면 중복이 있어야할까?
    - 한편으로는 다른 구현으로 LottoFactory 가 만들어 질 수도 있으니.. 중복이 있어야할까?
    - Lotto 의 역할을 침범하는 것도 같고



### Todo 
- [ ] 돈입력
- [ ] WinningLotto 입력
    - Lotto 입력
        - [x] 숫자와 컴마가 아닌 입력
        - [x] 컴마사이에 올바른 숫자가 없는 경우 (ex. "12 34"
        - [x] [1, 45] 범위에 존재하지 않는 값
        - [x] 로또가 가진 수가 6개가 아닌 경우
        - [x] 중복있는 입력, [1, 1, 3, 4, 5, 6]
       
#### 수동구매 추가
- 기존의 흐름에서 달라지는 부분이 있음
- 어디부터 공략할까? 
    - 흐름
    - 내부에서 사용되는 친구

일단 흐름을 생각해보자 (사용자역할을 하는 객체에서 어떻게 바라볼지)        
- 기존의 simulator 는 WinningLotto와 돈을 가지고.. lottoGroup과 RankAnalysis 를 생성했었음
- 이젠... lottoGroup이 먼저 생성되어야 할듯..
    - RankAnalysis <- [winningLotto, lottoGroup]
- 먼가.. 이런 흐름?
    - purchase (money, 수동으로 구매할 번호들) -> LottoGroup (구매한 것들) 
    - analyze (lottoGroup) -> RankAnalysis

무엇이 필요한가?
- LottoGroup 내부
    - 자동생성 (random)
    - 수동생성 (nonRandom)


구입금액을 입력해 주세요.
14000
14개를 구매했습니다.
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[23, 25, 33, 36, 39, 41]
[1, 3, 5, 14, 22, 45]
[5, 9, 38, 41, 43, 44]
[2, 8, 9, 18, 19, 21]
[13, 14, 18, 21, 23, 35]
[17, 21, 29, 37, 42, 45]
[3, 8, 27, 30, 35, 44]

지난 주 당첨 번호를 입력해 주세요.
1, 2, 3, 4, 5, 6

당첨 통계
---------
3개 일치 (5000원)- 1개
4개 일치 (50000원)- 0개
5개 일치 (1500000원)- 0개
6개 일치 (2000000000원)- 0개
총 수익률은 30%입니다.